/*! form 17-02-2016 */
(function(){"use strict";angular.module("sc-form",["sc-form-template","sc-form-modal"]).directive("textInputDirective",function(){return{restrict:"EA",templateUrl:"src/html_template/text_input_template.html",controller:"textInputController",require:"ngModel",scope:{icon:"@",label:"@",placeholder:"@",popoverMsg:"@",errorMsg:"=?",isDisabled:"=?",upperFirstLetter:"=?",localModel:"=ngModel"},compile:function(tElement,tAttrs){var postLink;return angular.isUndefined(tAttrs.isDisabled)&&(tAttrs.isDisabled="false"),angular.isUndefined(tAttrs.upperFirstLetter)&&(tAttrs.upperFirstLetter="false"),postLink=function(scope,iElement,iAttrs){return scope.popoverMsg&&""!==scope.popoverMsg?$(iElement).popover({trigger:"focus",content:scope.popoverMsg,placement:"top"}):void 0}}}}).controller("textInputController",function($scope){return $scope.originModel=angular.copy($scope.localModel),$scope.onBlur=function(){return $scope.localModel&&""!==$scope.localModel&&($scope.localModel=$scope.localModel.trim(),$scope.upperFirstLetter===!0)?$scope.localModel=$scope.localModel.charAt(0).toUpperCase()+$scope.localModel.slice(1):void 0}}).directive("listTextInputDirective",function(){return{restrict:"EA",templateUrl:"src/html_template/list_text_input_template.html",controller:"listTextInputController",require:"ngModel",scope:{icon:"@",label:"@",placeholder:"@",popoverMsg:"@",errorMsg:"=?",isDisabled:"=?",upperFirstLetter:"=?",localModel:"=ngModel"},compile:function(tElement,tAttrs){var postLink;return angular.isUndefined(tAttrs.isDisabled)&&(tAttrs.isDisabled="false"),angular.isUndefined(tAttrs.upperFirstLetter)&&(tAttrs.upperFirstLetter="false"),postLink=function(scope,iElement,iAttrs,ngModelCtrl){return ngModelCtrl.$formatters.push(function(modelValue){return modelValue}),ngModelCtrl.$parsers.push(function(viewValue){return viewValue}),ngModelCtrl.$render=function(){return scope.localModel=ngModelCtrl.$viewValue},scope.$watch("localModel",function(value){return ngModelCtrl.$setViewValue(value)}),scope.popoverMsg&&""!==scope.popoverMsg?$(iElement).popover({trigger:"focus",content:scope.popoverMsg,placement:"top"}):void 0}}}}).controller("listTextInputController",function($scope){return $scope.newValue=void 0,$scope.onBlur=function(){return $scope.newValue&&""!==$scope.newValue?($scope.newValue=$scope.newValue.trim(),$scope.upperFirstLetter===!0&&($scope.newValue=$scope.newValue.charAt(0).toUpperCase()+$scope.newValue.slice(1)),void 0===$scope.localModel&&($scope.localModel=[]),$scope.localModel.push($scope.newValue),$scope.newValue=""):void 0},$scope.deleteValue=function(key){return $scope.localModel.splice(key,1),0===$scope.localModel.length?delete $scope.localModel:void 0}}).directive("numberInputDirective",function(){return{restrict:"EA",templateUrl:"src/html_template/number_input_template.html",controller:"numberInputController",require:"ngModel",scope:{icon:"@",label:"@",placeholder:"@",popoverMsg:"@",errorMsg:"=?",isDisabled:"=?",step:"=?",localModel:"=ngModel"},compile:function(tElement,tAttrs){var postLink;return angular.isUndefined(tAttrs.isDisabled)&&(tAttrs.isDisabled="false"),postLink=function(scope,iElement,iAttrs){return scope.popoverMsg&&""!==scope.popoverMsg?$(iElement).popover({trigger:"focus",content:scope.popoverMsg,placement:"top"}):void 0}}}}).controller("numberInputController",function($scope){return $scope.originModel=angular.copy($scope.localModel)}).directive("dateInputDirective",function(){return{restrict:"EA",templateUrl:"src/html_template/date_input_template.html",controller:"dateInputController",require:"ngModel",scope:{icon:"@",label:"@",popoverMsg:"@",type:"@",approximativeModel:"=?",errorMsg:"=?",isDisabled:"=?",localModel:"=ngModel"},compile:function(tElement,tAttrs){var postLink;return angular.isUndefined(tAttrs.type)?tAttrs.type="date":tAttrs.type.match("^(date|datetime-local)$")||(console.log("Error: type must date|datetime-local"),tAttrs.type="date"),angular.isUndefined(tAttrs.isDisabled)&&(tAttrs.isDisabled="false"),postLink=function(scope,iElement,iAttrs){return scope.popoverMsg&&""!==scope.popoverMsg&&$(iElement).popover({trigger:"focus",content:scope.popoverMsg,placement:"top"}),scope.isApproximative=!angular.isUndefined(iAttrs.approximativeModel)}}}}).controller("dateInputController",function($scope,$timeout){return $scope.originModel=angular.copy($scope.localModel)}).directive("arrayInputDirective",function(){return{restrict:"EA",templateUrl:"src/html_template/array_input_template.html",controller:"arrayInputController",require:"ngModel",scope:{addButton:"@",json:"@",label:"@",isDisabled:"=?",localModel:"=ngModel"},compile:function(tElement,tAttrs){var postLink;return angular.isUndefined(tAttrs.addButton)&&(tAttrs.addButton="Add"),angular.isUndefined(tAttrs.isDisabled)&&(tAttrs.isDisabled="false"),postLink=function(scope,iElement,iAttrs,ngModelCtrl){return ngModelCtrl.$formatters.push(function(modelValue){return modelValue}),ngModelCtrl.$parsers.push(function(viewValue){return viewValue}),ngModelCtrl.$render=function(){return scope.localModel=ngModelCtrl.$viewValue},scope.$watch("localModel",function(value){return ngModelCtrl.$setViewValue(value)})}}}}).controller("arrayInputController",function($scope,$modal,$http){return $scope.jsonData=void 0,$http.get($scope.json).success(function(data){return $scope.jsonData=angular.copy(data)}).error(function(data,status){return $scope.errorMsg="Le fichier JSON ("+$scope.json+") n'a pa pu être récupéré."}),$scope.addValue=function(){var modalInstance;return modalInstance=$modal.open({templateUrl:"src/html_template/array_input_modal_template.html",controller:"arrayInputModalController",resolve:{jsonData:function(){return $scope.jsonData},modalModel:function(){return null}}}),modalInstance.result.then(function(result){return angular.equals({},result)?void 0:(void 0===$scope.localModel&&($scope.localModel=[]),$scope.localModel.push(result))})},$scope.editValue=function(key){var modalInstance;return modalInstance=$modal.open({templateUrl:"src/html_template/array_input_modal_template.html",controller:"arrayInputModalController",resolve:{jsonData:function(){return $scope.jsonData},modalModel:function(){return angular.copy($scope.localModel[key])}}}),modalInstance.result.then(function(result){return $scope.localModel[key]=angular.copy(result)})},$scope.deleteValue=function(key){return $scope.localModel.splice(key,1),0===$scope.localModel.length?delete $scope.localModel:void 0}})}).call(this),function(){"use strict";angular.module("sc-form-modal",["ui.bootstrap"]).controller("arrayInputModalController",function($scope,$modalInstance,jsonData,modalModel){return $scope.jsonData={},$scope.modalModel={},null!=jsonData&&($scope.jsonData=angular.copy(jsonData)),null!=modalModel&&($scope.modalModel=angular.copy(modalModel)),$scope.valid=function(){return $modalInstance.close($scope.modalModel)},$scope.cancel=function(){return $modalInstance.dismiss("cancel")}})}.call(this),angular.module("sc-form-template",[]).run(["$templateCache",function($templateCache){"use strict";$templateCache.put("src/html_template/array_input_modal_template.html",'<div><div class=modal-header><button class="btn btn-danger pull-right" ng-click=cancel()><i class="fa fa-lg fa-close"></i></button><h3>{{jsonData.title}}</h3></div><div class=modal-body><div class=form><div ng-repeat="input in jsonData.inputs"><div text-input-directive ng-if="input.type == \'text\'" ng-model=modalModel[input.model] label={{input.model}}></div><div list-text-input-directive ng-if="input.type == \'list-text\'" ng-model=modalModel[input.model] label={{input.model}}></div><div number-input-directive ng-if="input.type == \'number\'" ng-model=modalModel[input.model] label={{input.model}}></div><div date-input-directive ng-if="input.type == \'date\'" ng-model=modalModel[input.model] label={{input.model}}></div><div date-input-directive ng-if="input.type == \'datetime-local\'" ng-model=modalModel[input.model] label={{input.model}} type=datetime-local></div></div><div></div><div class=modal-footer><button class="btn btn-primary" ng-click=valid()>OK</button></div></div></div></div>'),$templateCache.put("src/html_template/array_input_template.html",'<div class="sc-form form-group"><label ng-if="label != undefined" class=label-control>{{label}}</label><div ng-show=errorMsg class="alert alert-danger"><i class="fa fa-exclamation-triangle" aria-hidden=true></i> <span>{{errorMsg}}</span></div><div class="input-group form-group form-control" ng-show=localModel><div ng-repeat="(key, elt) in localModel track by key"><div class=thumbnail style=background-color:#f2f2f2><span class=pull-right><span class="fa fa-edit" ng-if=!isDisabled ng-click=editValue(key)></span> <span class="fa fa-close" ng-if=!isDisabled ng-click=deleteValue(key)></span></span> <span ng-repeat="(id, value) in elt track by id"><br><span>{{id}}: {{value}}</span></span></div></div></div><input type=button class="btn btn-primary" ng-value="addButton == \'\' ? \'Add\' : addButton" ng-click=addValue() ng-disabled="isDisabled"></div>'),$templateCache.put("src/html_template/date_input_template.html",'<div class="sc-form form-group"><label ng-if="label != undefined" class=label-control>{{label}}</label><div class=input-group><div class=input-group-addon ng-if="icon != undefined"><i class="fa fa-lg fa-{{icon}}"></i></div><input type={{type}} class=form-control ng-model=localModel required ng-disabled="isDisabled"><div class="input-group-addon alert-warning" ng-show="originModel != localModel"><i class="fa fa-lg fa-pencil"></i></div><div ng-show=isApproximative class=input-group-addon><span>Approximative ?</span> <input type=checkbox ng-model=approximativeModel ng-disabled="isDisabled"></div></div><div ng-show=errorMsg class="alert alert-danger"><i class="fa fa-exclamation-triangle" aria-hidden=true></i> <span>{{errorMsg}}</span></div></div>'),$templateCache.put("src/html_template/list_text_input_template.html",'<div class="sc-form form-group"><label ng-if="label != undefined" class=label-control>{{label}}</label><div class=form-group ng-repeat="(key, value) in localModel track by key"><div class=input-group><div class=input-group-addon ng-if="icon != undefined"><i class="fa fa-lg fa-{{icon}}"></i></div><input class=form-control value={{value}} ng-disabled="isDisabled"><div class=input-group-addon ng-show=!uDisabled><a href="" ng-click=deleteValue(key)><i class="fa fa-lg fa-close"></i></a></div></div></div><div class=input-group><div class=input-group-addon ng-if="icon != undefined"><i class="fa fa-lg fa-{{icon}}"></i></div><input class=form-control ng-model=newValue ng-blur=onBlur() required placeholder={{placeholder}} ng-disabled="isDisabled"></div><div ng-show=errorMsg class="alert alert-danger"><i class="fa fa-exclamation-triangle" aria-hidden=true></i> <span>{{errorMsg}}</span></div></div>'),$templateCache.put("src/html_template/number_input_template.html",'<div class="sc-form form-group"><label ng-if="label != undefined" class=label-control>{{label}}</label><div class=input-group><div class=input-group-addon ng-if="icon != undefined"><i class="fa fa-lg fa-{{icon}}"></i></div><input type=number class=form-control ng-model=localModel step={{step}} required placeholder={{placeholder}} ng-disabled="isDisabled"><div class="input-group-addon alert-warning" ng-show="originModel != localModel"><i class="fa fa-lg fa-pencil"></i></div></div><div ng-show=errorMsg class="alert alert-danger"><i class="fa fa-exclamation-triangle" aria-hidden=true></i> <span>{{errorMsg}}</span></div></div>'),$templateCache.put("src/html_template/text_input_template.html",'<div class="sc-form form-group"><label ng-if="label != undefined" class=label-control>{{label}}</label><div class=input-group><div class=input-group-addon ng-if="icon != undefined"><i class="fa fa-lg fa-{{icon}}"></i></div><input class=form-control ng-model=localModel ng-blur=onBlur() required placeholder={{placeholder}} ng-disabled="isDisabled"><div class="input-group-addon alert-warning" ng-show="originModel != localModel"><i class="fa fa-lg fa-pencil"></i></div></div><div ng-show=errorMsg class="alert alert-danger"><i class="fa fa-exclamation-triangle" aria-hidden=true></i> <span>{{errorMsg}}</span></div></div>')}]);